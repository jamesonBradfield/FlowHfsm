Godot Engine v4.5.1.stable.official.f62fdbde1 - https://godotengine.org


██████████████████████████████████████████████████████████████████████
█                                                                    █
█                 HFSM STRESS TEST & BENCHMARK SUITE                 █
█                                                                    █
██████████████████████████████████████████████████████████████████████

Configuration:
  Hierarchy Tests:    ✓ Enabled
  Atomic Tests:       ✓ Enabled
  Benchmarks:         ✓ Enabled
  Stop on Failure:    ✗ No


======================================================================
RUNNING HIERARCHY BLOCKING TESTS
======================================================================

######################################################################
HIERARCHY BLOCKING BEHAVIOR STRESS TESTS
######################################################################


[TEST] Single State Lock
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER Grounded (path: Root > Grounded)
[  0.004] ENTER Idle (path: Root > Grounded > Idle)
[  0.005] EXIT  Idle (duration: 0.00ms)
[  0.007] ENTER Attack (path: Root > Grounded > Attack)
✓ Locked state prevents parent transition: true
✓ Idle never entered: true

[TEST] Nested State Lock
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER Grounded (path: Root > Grounded)
[  0.003] ENTER Attack (path: Root > Grounded > Attack)
[  0.004] ENTER HeavySwing (path: Root > Grounded > Attack > HeavySwing)
✓ Deep nested lock blocks transitions: true
✓ Hierarchy reports locked: true

[TEST] Deep Hierarchy Lock (10 levels)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER Level_0 (path: Root > Level_0)
[  0.004] ENTER Level_1 (path: Root > Level_0 > Level_1)
[  0.005] ENTER Level_2 (path: Root > Level_0 > Level_1 > Level_2)
[  0.007] ENTER Level_3 (path: Root > Level_0 > Level_1 > Level_2 > Level_3)
[  0.008] ENTER Level_4 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4)
[  0.010] ENTER Level_5 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5)
[  0.011] ENTER Level_6 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6)
[  0.013] ENTER Level_7 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7)
[  0.014] ENTER Level_8 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8)
[  0.016] ENTER Level_9 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9)
✓ 1000 lock checks completed
✓ Average time: 0.000 μs (budget: 100 μs)
✓ Within performance budget: true

[TEST] Sibling Lock Override
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER Grounded (path: Root > Grounded)
[  0.004] ENTER Idle (path: Root > Grounded > Idle)
[  0.005] EXIT  Idle (duration: 0.00ms)
[  0.007] ENTER Run (path: Root > Grounded > Run)
[  0.008] EXIT  Run (duration: 0.00ms)
[  0.010] ENTER Attack (path: Root > Grounded > Attack)
✓ Run activates when Attack not active: true
✓ Can force transition into locked state: true
✓ Cannot transition out of locked state: true

[TEST] Lock with History
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER Grounded (path: Root > Grounded)
[  0.003] ENTER Idle (path: Root > Grounded > Idle)
[  0.005] EXIT  Idle (duration: 0.00ms)
[  0.006] ENTER Attack (path: Root > Grounded > Attack)
[  0.008] EXIT  Attack (duration: 0.00ms)
[  0.009] EXIT  Grounded (duration: 0.01ms)
[  0.011] ENTER Grounded (path: Root > Grounded > Attack)
[  0.013] ENTER Attack (path: Root > Grounded > Attack)
✓ History resumes Attack state: true

[TEST] Lock Stress - Rapid Transitions
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER Grounded (path: Root > Grounded)
[  0.004] ENTER Idle (path: Root > Grounded > Idle)
✓ Completed 100 rapid lock toggles
✓ No crashes or errors: true
✓ Avg frame time: 6.000 μs

Hierarchy Tests Summary: 6/6 passed (100.0%)

======================================================================
RUNNING ATOMIC TRANSITION TESTS
======================================================================

######################################################################
ATOMIC TRANSITION STRESS TESTS
######################################################################


[TEST] Priority Order
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER State1_Priority_Low (path: Root > State1_Priority_Low)
[  0.004] EXIT  State1_Priority_Low (duration: 0.00ms)
[  0.005] ENTER State3_Priority_High (path: Root > State3_Priority_High)
✓ Highest priority state activated: true
✓ Correct entry order: false
  Entry sequence: [&"Root", &"State1_Priority_Low", &"State3_Priority_High"]

[TEST] Rapid Transitions
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER State_0 (path: Root > State_0)
[  0.003] EXIT  State_0 (duration: 0.00ms)
[  0.005] ENTER State_4 (path: Root > State_4)
✓ Completed 1000 frames
✓ Total transitions: 2
✓ Reasonable transition count: true
✓ No crashes: true
✓ Avg frame time: 5.000 μs

[TEST] Concurrent Conditions
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER AND_State (path: Root > AND_State)
[  0.003] EXIT  AND_State (duration: 0.00ms)
[  0.005] ENTER OR_State (path: Root > OR_State)
✓ OR state activated (higher priority): true
✓ AND state valid but not active (lower priority): true

[TEST] Atomicity - No Partial States
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER State_0 (path: Root > State_0)
[  0.003] EXIT  State_0 (duration: 0.00ms)
[  0.004] ENTER State_2 (path: Root > State_2)
✓ Always have an active state: true
✓ No entry/exit mismatches found: false

[TEST] Transition Stress Burst
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER State_0 (path: Root > State_0)
[  0.004] EXIT  State_0 (duration: 0.00ms)
[  0.006] ENTER State_9 (path: Root > State_9)
✓ Burst of 500 transitions completed
✓ Avg frame time: 15.000 μs
✓ Max frame time: 3553.000 μs
✓ Avg within budget: true
✓ Max within budget: false

[TEST] Deep Hierarchy Transitions
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER Level_0_Child_0 (path: Root > Level_0_Child_0)
[  0.003] ENTER Level_1_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0)
[  0.004] ENTER Level_2_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0)
[  0.006] ENTER Level_3_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0)
[  0.008] ENTER Level_4_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0)
[  0.009] ENTER Level_5_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0 > Level_5_Child_0)
[  0.011] ENTER Level_6_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0 > Level_5_Child_0 > Level_6_Child_0)
[  0.012] ENTER Level_7_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0 > Level_5_Child_0 > Level_6_Child_0 > Level_7_Child_0)
[  0.014] ENTER Level_8_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0 > Level_5_Child_0 > Level_6_Child_0 > Level_7_Child_0 > Level_8_Child_0)
[  0.015] ENTER Level_9_Child_0 (path: Root > Level_0_Child_0 > Level_1_Child_0 > Level_2_Child_0 > Level_3_Child_0 > Level_4_Child_0 > Level_5_Child_0 > Level_6_Child_0 > Level_7_Child_0 > Level_8_Child_0 > Level_9_Child_0)
[  0.017] EXIT  Level_9_Child_0 (duration: 0.00ms)
[  0.018] EXIT  Level_8_Child_0 (duration: 0.00ms)
[  0.020] EXIT  Level_7_Child_0 (duration: 0.01ms)
[  0.022] EXIT  Level_6_Child_0 (duration: 0.01ms)
[  0.024] EXIT  Level_5_Child_0 (duration: 0.01ms)
[  0.025] EXIT  Level_4_Child_0 (duration: 0.02ms)
[  0.027] EXIT  Level_3_Child_0 (duration: 0.02ms)
[  0.028] EXIT  Level_2_Child_0 (duration: 0.02ms)
[  0.030] EXIT  Level_1_Child_0 (duration: 0.03ms)
[  0.031] EXIT  Level_0_Child_0 (duration: 0.03ms)
[  0.033] ENTER Level_0_Child_2 (path: Root > Level_0_Child_2)
✓ Deep hierarchy (10 levels) transitions: 200 frames
✓ Avg frame time: 89.000 μs
✓ Within performance budget: true

[TEST] AND vs OR Logic Modes
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER AND_State (path: Root > AND_State)
[  0.000] EXIT  AND_State (duration: 0.00ms)
[  0.002] ENTER OR_State (path: Root > OR_State)
✓ AND activates with all true: true
✓ OR activates with one true: true

Atomic Tests Summary: 5/7 passed (71.4%)

======================================================================
RUNNING PERFORMANCE BENCHMARKS
======================================================================

######################################################################
HFSM PERFORMANCE BENCHMARK SUITE
######################################################################

[WARMUP] Running warmup cycles...
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER State_0 (path: Root > State_0)
[  0.003] EXIT  State_0 (duration: 0.00ms)
[  0.004] ENTER State_9 (path: Root > State_9)

[BENCHMARK] Baseline - Single State
----------------------------------------
✓ Avg: 0.000 μs | Max: 101.000 μs | Budget: 0.00%

[BENCHMARK] Small Hierarchy (5 states)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER State_0 (path: Root > State_0)
[  0.004] EXIT  State_0 (duration: 0.00ms)
[  0.005] ENTER State_4 (path: Root > State_4)
✓ Avg: 3.000 μs | Max: 2976.000 μs | Budget: 0.02%

[BENCHMARK] Medium Hierarchy (20 states)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.002] ENTER State_0 (path: Root > State_0)
[  0.004] EXIT  State_0 (duration: 0.00ms)
[  0.005] ENTER State_19 (path: Root > State_19)
✓ Avg: 8.000 μs | Max: 3104.000 μs | Budget: 0.05%

[BENCHMARK] Large Hierarchy (100 states)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER State_0 (path: Root > State_0)
[  0.003] EXIT  State_0 (duration: 0.00ms)
[  0.004] ENTER State_99 (path: Root > State_99)
✓ Avg: 38.000 μs | Max: 3124.000 μs | Budget: 0.23%

[BENCHMARK] Deep Hierarchy (15 levels)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER Level_0 (path: Root > Level_0)
[  0.003] ENTER Level_1 (path: Root > Level_0 > Level_1)
[  0.004] ENTER Level_2 (path: Root > Level_0 > Level_1 > Level_2)
[  0.006] ENTER Level_3 (path: Root > Level_0 > Level_1 > Level_2 > Level_3)
[  0.008] ENTER Level_4 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4)
[  0.009] ENTER Level_5 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5)
[  0.011] ENTER Level_6 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6)
[  0.012] ENTER Level_7 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7)
[  0.014] ENTER Level_8 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8)
[  0.015] ENTER Level_9 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9)
[  0.017] ENTER Level_10 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9 > Level_10)
[  0.018] ENTER Level_11 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9 > Level_10 > Level_11)
[  0.020] ENTER Level_12 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9 > Level_10 > Level_11 > Level_12)
[  0.021] ENTER Level_13 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9 > Level_10 > Level_11 > Level_12 > Level_13)
[  0.023] ENTER Level_14 (path: Root > Level_0 > Level_1 > Level_2 > Level_3 > Level_4 > Level_5 > Level_6 > Level_7 > Level_8 > Level_9 > Level_10 > Level_11 > Level_12 > Level_13 > Level_14)
✓ Avg: 16.000 μs | Max: 144.000 μs | Budget: 0.10%

[BENCHMARK] Wide Hierarchy (20 children)
----------------------------------------
[  0.000] ENTER Root (path: Root)
[  0.001] ENTER Child_0 (path: Root > Child_0)
✓ Avg: 26.000 μs | Max: 378.000 μs | Budget: 0.16%

[BENCHMARK] Resource Loading
----------------------------------------
✓ Loaded 100 resources in 0.25 ms
✓ Avg load time: 2.490 μs per resource
✓ Avg access time: 0.052 μs

[BENCHMARK] Blackboard Access
----------------------------------------
✓ Read access (300000 lookups): 0.097 μs
✓ Write access (300000 writes): 0.060 μs

======================================================================
BENCHMARK SUMMARY
======================================================================
✓ PASS Single State                   Avg:   0.00 μs | Budget:  0.00%
✓ PASS Small Hierarchy (5)            Avg:   3.00 μs | Budget:  0.02%
✓ PASS Medium Hierarchy (20)          Avg:   8.00 μs | Budget:  0.05%
✓ PASS Large Hierarchy (100)          Avg:  38.00 μs | Budget:  0.23%
✓ PASS Deep Hierarchy (15)            Avg:  16.00 μs | Budget:  0.10%
✓ PASS Wide Hierarchy (20)            Avg:  26.00 μs | Budget:  0.16%
----------------------------------------------------------------------
Results: 8/8 benchmarks passed (100.0%)
======================================================================


██████████████████████████████████████████████████████████████████████
█                                                                    █
█                         FINAL TEST REPORT                          █
█                                                                    █
██████████████████████████████████████████████████████████████████████

Test Execution Time: 0.92 seconds

Test Results:
  Total Tests:      13
  Tests Passed:     11
  Tests Failed:     2
  Pass Rate:        84.6%

Benchmark Results:
  Total Benchmarks: 8
  Acceptable:       8
  Needs Attention: 0

----------------------------------------------------------------------
DETAILED BREAKDOWN
----------------------------------------------------------------------

[Hierarchy Blocking Tests]
  ✓ PASS single_state_lock
  ✓ PASS nested_state_lock
  ✓ PASS deep_hierarchy_lock
  ✓ PASS sibling_lock_override
  ✓ PASS lock_with_history
  ✓ PASS lock_stress_rapid_transitions

[Atomic Transition Tests]
  ✗ FAIL priority_order
  ✓ PASS rapid_transitions
  ✓ PASS concurrent_conditions
  ✓ PASS atomicity_no_partial_states
  ✗ FAIL transition_stress_burst
  ✓ PASS deep_hierarchy_transitions
  ✓ PASS and_vs_or_logic

[Performance Benchmarks]
  ✓ PASS Single State                   Avg:   0.00 μs | Budget:  0.00%
  ✓ PASS Small Hierarchy (5)            Avg:   3.00 μs | Budget:  0.02%
  ✓ PASS Medium Hierarchy (20)          Avg:   8.00 μs | Budget:  0.05%
  ✓ PASS Large Hierarchy (100)          Avg:  38.00 μs | Budget:  0.23%
  ✓ PASS Deep Hierarchy (15)            Avg:  16.00 μs | Budget:  0.10%
  ✓ PASS Wide Hierarchy (20)            Avg:  26.00 μs | Budget:  0.16%
  ✓ PASS Resource Loading               Load:   2.49 μs | Access:   0.05 μs

██████████████████████████████████████████████████████████████████████
█                                                                    █
█                        ✗ SOME TESTS FAILED                         █
█                                                                    █
██████████████████████████████████████████████████████████████████████

ERROR: BUG: Unreferenced static string to 0: servers
   at: unref (core/string/string_name.cpp:116)
ERROR: BUG: Unreferenced static string to 0: .
   at: unref (core/string/string_name.cpp:116)
ERROR: BUG: Unreferenced static string to 0: Variant
   at: unref (core/string/string_name.cpp:116)
